<!-- vim: set nomodeline: -->
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Voltage Score Calculator</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap" rel="stylesheet">
<meta name="colorscheme" content="catppuccin-mocha"></meta>
<style>
* { font-family: "JetBrains Mono", "JetBrainsMono Nerd Font", monospace; }
body {background-color: #1e1e2e; color: #cdd6f4}
.Exception {color: #cba6f7}
.Number {font-weight: bold; color: #fab387}
.-string-escape {color: #f5c2e7}
.Function {color: #89b4fa}
.-constant-builtin {color: #fab387}
.-_identifier {}
.Character {color: #94e2d5}
.String {color: #a6e3a1}
.-function-macro {color: #94e2d5}
.-variable-member {color: #b4befe}
.Comment {font-style: italic; color: #9399b2}
.Special {color: #f5c2e7}
.-variable {color: #cdd6f4}
.-spell {}
.-variable-builtin {color: #f38ba8}
.-module {font-style: italic; color: #b4befe}
.Type {color: #f9e2af}
.Keyword {color: #cba6f7}
.Conditional {font-style: italic; color: #cba6f7}
.Constant {color: #fab387}
.-punctuation-bracket {color: #9399b2}
.Delimiter {color: #9399b2}
.Repeat {color: #cba6f7}
.-keyword-function {color: #cba6f7}
.Include {color: #cba6f7}
.-variable-parameter {color: #eba0ac}
.-type-builtin {color: #f9e2af}
.Operator {color: #89dceb}
</style>
</head>
<body style="display: flex">
<pre>
<span class="Include">use</span> <span class="-variable"><span class="-module">std</span></span><span class="Delimiter">::</span><span class="-punctuation-bracket">{</span><span class="-variable"><span class="-module"><span class="-module">fs</span></span></span><span class="Delimiter">::</span><span class="-variable"><span class="Type"><span class="Type">File</span></span></span><span class="Delimiter">,</span> <span class="-variable"><span class="-module"><span class="-module">io</span></span></span><span class="Delimiter">::</span><span class="-variable"><span class="Type"><span class="Type">Write</span></span></span><span class="-punctuation-bracket">}</span><span class="Delimiter">;</span>

<span class="Keyword">const</span> <span class="-variable"><span class="Type"><span class="Constant"><span class="Constant">FLASH_SCORE</span></span></span></span><span class="Delimiter">:</span> <span class="-type-builtin">u32</span> <span class="Operator">=</span> <span class="Number">1_100_000_000</span><span class="Delimiter">;</span>
<span class="Keyword">const</span> <span class="-variable"><span class="Type"><span class="Constant"><span class="Constant">TOP_SCORE</span></span></span></span><span class="Delimiter">:</span> <span class="-type-builtin">u32</span> <span class="Operator">=</span> <span class="Number">1_000_000_000</span><span class="Delimiter">;</span>
<span class="Keyword">const</span> <span class="-variable"><span class="Type"><span class="Constant"><span class="Constant">ZONE_SCORE</span></span></span></span><span class="Delimiter">:</span> <span class="-type-builtin">u32</span> <span class="Operator">=</span> <span class="-variable"><span class="Type"><span class="Constant">TOP_SCORE</span></span></span> <span class="Operator">/</span> <span class="Number">2</span><span class="Delimiter">;</span>
<span class="Keyword">const</span> <span class="-variable"><span class="Type"><span class="Constant"><span class="Constant">NUM_QUALIFIER_BOULDERS</span></span></span></span><span class="Delimiter">:</span> <span class="-type-builtin">usize</span> <span class="Operator">=</span> <span class="Number">20</span><span class="Delimiter">;</span>

<span class="-keyword-function">fn</span> <span class="-variable"><span class="Function">main</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span> <span class="Delimiter">-&gt;</span> <span class="-variable"><span class="-module">std</span></span><span class="Delimiter">::</span><span class="-variable"><span class="-module">io</span></span><span class="Delimiter">::</span><span class="Type">Result</span><span class="Operator"><span class="-punctuation-bracket">&lt;</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Operator"><span class="-punctuation-bracket">&gt;</span></span> <span class="-punctuation-bracket">{</span>
    <span class="Keyword">let</span> <span class="Keyword">mut</span> <span class="-variable">args</span> <span class="Operator">=</span> <span class="-variable"><span class="-module">std</span></span><span class="Delimiter">::</span><span class="-variable"><span class="-module">env</span></span><span class="Delimiter">::</span><span class="-variable"><span class="Function">args</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">skip</span></span><span class="-punctuation-bracket">(</span><span class="Number">1</span><span class="-punctuation-bracket">)</span><span class="Delimiter">;</span>

    <span class="Comment"><span class="-spell">// Read in the path for the responses from the form</span></span>
    <span class="Keyword">let</span> <span class="-variable">qualifer_csv</span> <span class="Operator">=</span> <span class="-variable">args</span>
        <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">next</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span>
        <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">map</span></span><span class="-punctuation-bracket">(</span><span class="Operator"><span class="-punctuation-bracket">|</span></span><span class="-variable"><span class="-variable-parameter">path</span></span><span class="Operator"><span class="-punctuation-bracket">|</span></span> <span class="-variable"><span class="-module">std</span></span><span class="Delimiter">::</span><span class="-variable"><span class="-module">fs</span></span><span class="Delimiter">::</span><span class="-variable"><span class="Function">read_to_string</span></span><span class="-punctuation-bracket">(</span><span class="-variable">path</span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">)</span>
        <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">expect</span></span><span class="-punctuation-bracket">(</span><span class="String">&quot;Voltage<span class="-string-escape">\\</span> Qualifiers.csv path expected&quot;</span><span class="-punctuation-bracket">)</span><span class="Operator">?</span><span class="Delimiter">;</span>

    <span class="Keyword">let</span> <span class="-punctuation-bracket">(</span><span class="Keyword">mut</span> <span class="-variable">competitors</span><span class="Delimiter">,</span> <span class="-variable">boulders</span><span class="-punctuation-bracket">)</span> <span class="Operator">=</span> <span class="-variable"><span class="Function">parse_csv</span></span><span class="-punctuation-bracket">(</span><span class="-variable">qualifer_csv</span><span class="-punctuation-bracket">)</span><span class="Delimiter">;</span>

    <span class="Comment"><span class="-spell">// calculate scores</span></span>
    <span class="Keyword"><span class="Repeat">for</span></span> <span class="-variable">competitor</span> <span class="Repeat">in</span> <span class="Operator">&amp;</span><span class="Keyword">mut</span> <span class="-variable">competitors</span> <span class="-punctuation-bracket">{</span>
        <span class="-variable">competitor</span><span class="Delimiter">.</span><span class="-variable-member">score</span> <span class="Operator">=</span> <span class="-variable">competitor</span>
            <span class="Delimiter">.</span><span class="-variable-member">outcomes</span>
            <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">iter</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span>
            <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">zip</span></span><span class="-punctuation-bracket">(</span><span class="Operator">&amp;</span><span class="-variable">boulders</span><span class="-punctuation-bracket">)</span>
            <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">map</span></span><span class="-punctuation-bracket">(</span><span class="Operator"><span class="-punctuation-bracket">|</span></span><span class="-variable-parameter"><span class="-punctuation-bracket">(</span><span class="-variable">outcome</span><span class="Delimiter">,</span> <span class="-variable">boulder</span><span class="-punctuation-bracket">)</span></span><span class="Operator"><span class="-punctuation-bracket">|</span></span> <span class="Conditional">match</span> <span class="Operator">*</span><span class="-variable">outcome</span> <span class="-punctuation-bracket">{</span>
                <span class="-variable"><span class="Type"><span class="-constant-builtin">Some</span></span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type"><span class="-module"><span class="Type"><span class="Type">Outcome</span></span></span></span></span><span class="Delimiter">::</span><span class="-variable"><span class="Type"><span class="Type"><span class="Constant">Zone</span></span></span></span><span class="-punctuation-bracket">)</span> <span class="Delimiter">=&gt;</span> <span class="-variable">boulder</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">zone_score</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Delimiter">,</span>
                <span class="-variable"><span class="Type"><span class="-constant-builtin">Some</span></span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type"><span class="-module"><span class="Type"><span class="Type">Outcome</span></span></span></span></span><span class="Delimiter">::</span><span class="-variable"><span class="Type"><span class="Type"><span class="Constant">Top</span></span></span></span><span class="-punctuation-bracket">)</span> <span class="Delimiter">=&gt;</span> <span class="-variable">boulder</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">top_score</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Delimiter">,</span>
                <span class="-variable"><span class="Type"><span class="-constant-builtin">Some</span></span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type"><span class="-module"><span class="Type"><span class="Type">Outcome</span></span></span></span></span><span class="Delimiter">::</span><span class="-variable"><span class="Type"><span class="Type"><span class="Constant">Flash</span></span></span></span><span class="-punctuation-bracket">)</span> <span class="Delimiter">=&gt;</span> <span class="-variable">boulder</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">flash_score</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Delimiter">,</span>
                <span class="-variable"><span class="Type"><span class="Constant"><span class="-constant-builtin">None</span></span></span></span> <span class="Delimiter">=&gt;</span> <span class="Number">0</span><span class="Delimiter">,</span>
            <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span>
            <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">sum</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Delimiter">;</span>
    <span class="-punctuation-bracket">}</span>

    <span class="Comment"><span class="-spell">// Sort largest to smallest</span></span>
    <span class="-variable">competitors</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">sort_unstable_by_key</span></span><span class="-punctuation-bracket">(</span><span class="Operator"><span class="-punctuation-bracket">|</span></span><span class="-variable"><span class="-variable-parameter">v</span></span><span class="Operator"><span class="-punctuation-bracket">|</span></span> <span class="-variable"><span class="-module">u32</span></span><span class="Delimiter">::</span><span class="-variable"><span class="Type"><span class="Constant"><span class="Type"><span class="Constant">MAX</span></span></span></span></span> <span class="Operator">-</span> <span class="-variable">v</span><span class="Delimiter">.</span><span class="-variable-member">score</span><span class="-punctuation-bracket">)</span><span class="Delimiter">;</span>

    <span class="Comment"><span class="-spell">// compute spacing for nice formatting</span></span>
    <span class="Keyword">let</span> <span class="-variable">spacing</span> <span class="Operator">=</span> <span class="Number">1</span> <span class="Operator">+</span> <span class="-variable">competitors</span>
        <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">iter</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span>
        <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">map</span></span><span class="-punctuation-bracket">(</span><span class="Operator"><span class="-punctuation-bracket">|</span></span><span class="-variable"><span class="-variable-parameter">c</span></span><span class="Operator"><span class="-punctuation-bracket">|</span></span> <span class="-variable">c</span><span class="Delimiter">.</span><span class="-variable-member">first_name</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">len</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span> <span class="Operator">+</span> <span class="-variable">c</span><span class="Delimiter">.</span><span class="-variable-member">last_name</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">len</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">)</span>
        <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">max</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span>
        <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">unwrap_or_default</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Delimiter">;</span>

    <span class="Comment"><span class="-spell">// mens</span></span>
    <span class="-punctuation-bracket">{</span>
        <span class="Keyword">let</span> <span class="Keyword">mut</span> <span class="-variable">mens</span> <span class="Operator">=</span> <span class="-variable"><span class="Type"><span class="-module"><span class="Type">File</span></span></span></span><span class="Delimiter">::</span><span class="-variable"><span class="Function">create</span></span><span class="-punctuation-bracket">(</span><span class="String">&quot;mens.md&quot;</span><span class="-punctuation-bracket">)</span><span class="Operator">?</span><span class="Delimiter">;</span>
        <span class="-variable">mens</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">write_all</span></span><span class="-punctuation-bracket">(</span><span class="String">b&quot;|Position|Name|Score|<span class="-string-escape">\n</span>|--------|----|-----|<span class="-string-escape">\n</span>&quot;</span><span class="-punctuation-bracket">)</span><span class="Operator">?</span><span class="Delimiter">;</span>
        <span class="Keyword"><span class="Repeat">for</span></span> <span class="-punctuation-bracket">(</span>
            <span class="Type">Competitor</span> <span class="-punctuation-bracket">{</span>
                <span class="-variable-member">first_name</span><span class="Delimiter">,</span>
                <span class="-variable-member">last_name</span><span class="Delimiter">,</span>
                <span class="-variable-member">score</span><span class="Delimiter">,</span>
                <span class="Operator"><span class="Special">..</span></span>
            <span class="-punctuation-bracket">}</span><span class="Delimiter">,</span>
            <span class="-variable">pos</span><span class="Delimiter">,</span>
        <span class="-punctuation-bracket">)</span> <span class="Repeat">in</span> <span class="-variable">competitors</span>
            <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">iter</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span>
            <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">filter</span></span><span class="-punctuation-bracket">(</span><span class="Operator"><span class="-punctuation-bracket">|</span></span><span class="-variable-parameter"><span class="Type">Competitor</span> <span class="-punctuation-bracket">{</span> <span class="-variable-member">category</span><span class="Delimiter">,</span> <span class="Operator"><span class="Special">..</span></span> <span class="-punctuation-bracket">}</span></span><span class="Operator"><span class="-punctuation-bracket">|</span></span> <span class="-variable"><span class="-function-macro">matches</span></span><span class="Operator"><span class="-function-macro">!</span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">(</span></span><span class="Operator"><span class="Operator">*</span></span><span class="-variable"><span class="-variable">category</span></span><span class="Delimiter"><span class="Delimiter">,</span></span> <span class="-variable"><span class="Type"><span class="-variable"><span class="Type"><span class="-module"><span class="Type"><span class="Type">Category</span></span></span></span></span></span></span><span class="Delimiter"><span class="Delimiter">::</span></span><span class="-variable"><span class="Type"><span class="-variable"><span class="Type"><span class="Type"><span class="Constant">Mens</span></span></span></span></span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">)</span></span><span class="-punctuation-bracket">)</span>
            <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">zip</span></span><span class="-punctuation-bracket">(</span><span class="Number">1</span><span class="Operator">..</span><span class="-punctuation-bracket">)</span>
        <span class="-punctuation-bracket">{</span>
            <span class="Keyword">let</span> <span class="Keyword">mut</span> <span class="-variable">buf</span> <span class="Operator">=</span> <span class="-variable"><span class="-function-macro">format</span></span><span class="Operator"><span class="-function-macro">!</span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">(</span></span><span class="String"><span class="String">&quot;|{pos:2}|{first_name} {last_name}&quot;</span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">)</span></span><span class="Delimiter">;</span>
            <span class="Keyword"><span class="Repeat">for</span></span> <span class="Special">_</span> <span class="Repeat">in</span> <span class="Number">0</span><span class="Operator">..</span><span class="-variable">spacing</span> <span class="Operator">-</span> <span class="-variable">first_name</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">len</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span> <span class="Operator">-</span> <span class="-variable">last_name</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">len</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span>
                <span class="-variable">buf</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">push</span></span><span class="-punctuation-bracket">(</span><span class="Character">' '</span><span class="-punctuation-bracket">)</span>
            <span class="-punctuation-bracket">}</span>
            <span class="-variable">buf</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">push_str</span></span><span class="-punctuation-bracket">(</span><span class="Operator">&amp;</span><span class="-variable"><span class="-function-macro">format</span></span><span class="Operator"><span class="-function-macro">!</span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">(</span></span><span class="String"><span class="String">&quot;|{:8.2}|<span class="-string-escape"><span class="-string-escape">\n</span></span>&quot;</span></span><span class="Delimiter"><span class="Delimiter">,</span></span> <span class="Operator"><span class="Operator">*</span></span><span class="-variable"><span class="-variable">score</span></span> <span class="Operator">as</span> <span class="-type-builtin"><span class="-type-builtin">f32</span></span> <span class="Operator"><span class="Operator">*</span></span> <span class="Number"><span class="Number">0.000001</span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">)</span></span><span class="-punctuation-bracket">)</span><span class="Delimiter">;</span>
            <span class="-variable">mens</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">write_all</span></span><span class="-punctuation-bracket">(</span><span class="-variable">buf</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">as_bytes</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">)</span><span class="Operator">?</span>
        <span class="-punctuation-bracket">}</span>
    <span class="-punctuation-bracket">}</span>

    <span class="Comment"><span class="-spell">// womens</span></span>
    <span class="-punctuation-bracket">{</span>
        <span class="Keyword">let</span> <span class="Keyword">mut</span> <span class="-variable">womens</span> <span class="Operator">=</span> <span class="-variable"><span class="Type"><span class="-module"><span class="Type">File</span></span></span></span><span class="Delimiter">::</span><span class="-variable"><span class="Function">create</span></span><span class="-punctuation-bracket">(</span><span class="String">&quot;womens.md&quot;</span><span class="-punctuation-bracket">)</span><span class="Operator">?</span><span class="Delimiter">;</span>
        <span class="-variable">womens</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">write_all</span></span><span class="-punctuation-bracket">(</span><span class="String">b&quot;|Position|Name|Score|<span class="-string-escape">\n</span>|--------|----|-----|<span class="-string-escape">\n</span>&quot;</span><span class="-punctuation-bracket">)</span><span class="Operator">?</span><span class="Delimiter">;</span>
        <span class="Keyword"><span class="Repeat">for</span></span> <span class="-punctuation-bracket">(</span>
            <span class="Type">Competitor</span> <span class="-punctuation-bracket">{</span>
                <span class="-variable-member">first_name</span><span class="Delimiter">,</span>
                <span class="-variable-member">last_name</span><span class="Delimiter">,</span>
                <span class="-variable-member">score</span><span class="Delimiter">,</span>
                <span class="Operator"><span class="Special">..</span></span>
            <span class="-punctuation-bracket">}</span><span class="Delimiter">,</span>
            <span class="-variable">pos</span><span class="Delimiter">,</span>
        <span class="-punctuation-bracket">)</span> <span class="Repeat">in</span> <span class="-variable">competitors</span>
            <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">iter</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span>
            <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">filter</span></span><span class="-punctuation-bracket">(</span><span class="Operator"><span class="-punctuation-bracket">|</span></span><span class="-variable-parameter"><span class="Type">Competitor</span> <span class="-punctuation-bracket">{</span> <span class="-variable-member">category</span><span class="Delimiter">,</span> <span class="Operator"><span class="Special">..</span></span> <span class="-punctuation-bracket">}</span></span><span class="Operator"><span class="-punctuation-bracket">|</span></span> <span class="-variable"><span class="-function-macro">matches</span></span><span class="Operator"><span class="-function-macro">!</span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">(</span></span><span class="Operator"><span class="Operator">*</span></span><span class="-variable"><span class="-variable">category</span></span><span class="Delimiter"><span class="Delimiter">,</span></span> <span class="-variable"><span class="Type"><span class="-variable"><span class="Type"><span class="-module"><span class="Type"><span class="Type">Category</span></span></span></span></span></span></span><span class="Delimiter"><span class="Delimiter">::</span></span><span class="-variable"><span class="Type"><span class="-variable"><span class="Type"><span class="Type"><span class="Constant">Womens</span></span></span></span></span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">)</span></span><span class="-punctuation-bracket">)</span>
            <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">zip</span></span><span class="-punctuation-bracket">(</span><span class="Number">1</span><span class="Operator">..</span><span class="-punctuation-bracket">)</span>
        <span class="-punctuation-bracket">{</span>
            <span class="Keyword">let</span> <span class="Keyword">mut</span> <span class="-variable">buf</span> <span class="Operator">=</span> <span class="-variable"><span class="-function-macro">format</span></span><span class="Operator"><span class="-function-macro">!</span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">(</span></span><span class="String"><span class="String">&quot;|{pos:2}|{first_name} {last_name}|&quot;</span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">)</span></span><span class="Delimiter">;</span>
            <span class="Keyword"><span class="Repeat">for</span></span> <span class="Special">_</span> <span class="Repeat">in</span> <span class="Number">0</span><span class="Operator">..</span><span class="-variable">spacing</span> <span class="Operator">-</span> <span class="-variable">first_name</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">len</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span> <span class="Operator">-</span> <span class="-variable">last_name</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">len</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span>
                <span class="-variable">buf</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">push</span></span><span class="-punctuation-bracket">(</span><span class="Character">' '</span><span class="-punctuation-bracket">)</span>
            <span class="-punctuation-bracket">}</span>
            <span class="-variable">buf</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">push_str</span></span><span class="-punctuation-bracket">(</span><span class="Operator">&amp;</span><span class="-variable"><span class="-function-macro">format</span></span><span class="Operator"><span class="-function-macro">!</span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">(</span></span><span class="String"><span class="String">&quot;{:8.2}|<span class="-string-escape"><span class="-string-escape">\n</span></span>&quot;</span></span><span class="Delimiter"><span class="Delimiter">,</span></span> <span class="Operator"><span class="Operator">*</span></span><span class="-variable"><span class="-variable">score</span></span> <span class="Operator">as</span> <span class="-type-builtin"><span class="-type-builtin">f32</span></span> <span class="Operator"><span class="Operator">*</span></span> <span class="Number"><span class="Number">0.000001</span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">)</span></span><span class="-punctuation-bracket">)</span><span class="Delimiter">;</span>
            <span class="-variable">womens</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">write_all</span></span><span class="-punctuation-bracket">(</span><span class="-variable">buf</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">as_bytes</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">)</span><span class="Operator">?</span>
        <span class="-punctuation-bracket">}</span>
    <span class="-punctuation-bracket">}</span>

    <span class="Comment"><span class="-spell">// boulders</span></span>
    <span class="-punctuation-bracket">{</span>
        <span class="Keyword">let</span> <span class="Keyword">mut</span> <span class="-variable">boulders_file</span> <span class="Operator">=</span> <span class="-variable"><span class="Type"><span class="-module"><span class="Type">File</span></span></span></span><span class="Delimiter">::</span><span class="-variable"><span class="Function">create</span></span><span class="-punctuation-bracket">(</span><span class="String">&quot;boulders.md&quot;</span><span class="-punctuation-bracket">)</span><span class="Operator">?</span><span class="Delimiter">;</span>

        <span class="-variable">boulders_file</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">write_all</span></span><span class="-punctuation-bracket">(</span>
            <span class="-variable"><span class="-function-macro">format</span></span><span class="Operator"><span class="-function-macro">!</span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">(</span></span>
                <span class="String"><span class="String">&quot;| Boulder    | {:11} | {:11} | {:11} | {:11} | {:11} | {:11}|<span class="-string-escape"><span class="-string-escape">\n</span></span>|------------|-------------|-------------|-------------|-------------|-------------|------------|<span class="-string-escape"><span class="-string-escape">\n</span></span>&quot;</span></span><span class="Delimiter"><span class="Delimiter">,</span></span>
                <span class="String"><span class="String">&quot;zone score&quot;</span></span><span class="Delimiter"><span class="Delimiter">,</span></span> <span class="String"><span class="String">&quot;num zones&quot;</span></span><span class="Delimiter"><span class="Delimiter">,</span></span> <span class="String"><span class="String">&quot;top score&quot;</span></span><span class="Delimiter"><span class="Delimiter">,</span></span> <span class="String"><span class="String">&quot;num tops&quot;</span></span><span class="Delimiter"><span class="Delimiter">,</span></span> <span class="String"><span class="String">&quot;flash score&quot;</span></span><span class="Delimiter"><span class="Delimiter">,</span></span> <span class="String"><span class="String">&quot;num flashes&quot;</span></span>
            <span class="-punctuation-bracket"><span class="-punctuation-bracket">)</span></span>
            <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">as_bytes</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Delimiter">,</span>
        <span class="-punctuation-bracket">)</span><span class="Operator">?</span><span class="Delimiter">;</span>

        <span class="Keyword"><span class="Repeat">for</span></span> <span class="-punctuation-bracket">(</span><span class="-variable">boulder</span><span class="Delimiter">,</span> <span class="-variable">num</span><span class="-punctuation-bracket">)</span> <span class="Repeat">in</span> <span class="-variable">boulders</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">into_iter</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">zip</span></span><span class="-punctuation-bracket">(</span><span class="Number">1</span><span class="Operator">..</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span>
            <span class="-variable">boulders_file</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">write_all</span></span><span class="-punctuation-bracket">(</span>
                <span class="-variable"><span class="-function-macro">format</span></span><span class="Operator"><span class="-function-macro">!</span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">(</span></span>
                    <span class="String"><span class="String">&quot;| Boulder {num:2} | {:11.2} | {:11.2} | {:11.2} | {:11.2} | {:11.2} | {:11.2}|<span class="-string-escape"><span class="-string-escape">\n</span></span>&quot;</span></span><span class="Delimiter"><span class="Delimiter">,</span></span>
                    <span class="-variable"><span class="-variable">boulder</span></span><span class="Delimiter"><span class="Delimiter">.</span></span><span class="-variable"><span class="-variable-member"><span class="Function">zone_score</span></span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">(</span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">)</span></span> <span class="Operator">as</span> <span class="-type-builtin"><span class="-type-builtin">f32</span></span> <span class="Operator"><span class="Operator">*</span></span> <span class="Number"><span class="Number">0.000001</span></span><span class="Delimiter"><span class="Delimiter">,</span></span>
                    <span class="-variable"><span class="-variable">boulder</span></span><span class="Delimiter"><span class="Delimiter">.</span></span><span class="-variable"><span class="-variable-member">zones</span></span><span class="Delimiter"><span class="Delimiter">,</span></span>
                    <span class="-variable"><span class="-variable">boulder</span></span><span class="Delimiter"><span class="Delimiter">.</span></span><span class="-variable"><span class="-variable-member"><span class="Function">top_score</span></span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">(</span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">)</span></span> <span class="Operator">as</span> <span class="-type-builtin"><span class="-type-builtin">f32</span></span> <span class="Operator"><span class="Operator">*</span></span> <span class="Number"><span class="Number">0.000001</span></span><span class="Delimiter"><span class="Delimiter">,</span></span>
                    <span class="-variable"><span class="-variable">boulder</span></span><span class="Delimiter"><span class="Delimiter">.</span></span><span class="-variable"><span class="-variable-member">tops</span></span><span class="Delimiter"><span class="Delimiter">,</span></span>
                    <span class="-variable"><span class="-variable">boulder</span></span><span class="Delimiter"><span class="Delimiter">.</span></span><span class="-variable"><span class="-variable-member"><span class="Function">flash_score</span></span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">(</span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">)</span></span> <span class="Operator">as</span> <span class="-type-builtin"><span class="-type-builtin">f32</span></span> <span class="Operator"><span class="Operator">*</span></span> <span class="Number"><span class="Number">0.000001</span></span><span class="Delimiter"><span class="Delimiter">,</span></span>
                    <span class="-variable"><span class="-variable">boulder</span></span><span class="Delimiter"><span class="Delimiter">.</span></span><span class="-variable"><span class="-variable-member">flashes</span></span><span class="Delimiter"><span class="Delimiter">,</span></span>
                <span class="-punctuation-bracket"><span class="-punctuation-bracket">)</span></span>
                <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">as_bytes</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Delimiter">,</span>
            <span class="-punctuation-bracket">)</span><span class="Operator">?</span>
        <span class="-punctuation-bracket">}</span>
    <span class="-punctuation-bracket">}</span>

    <span class="-variable"><span class="Type"><span class="Function"><span class="-constant-builtin">Ok</span></span></span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">)</span>
<span class="-punctuation-bracket">}</span>

<span class="-keyword-function">fn</span> <span class="-variable"><span class="Function">parse_csv</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="-variable-parameter">qualifier_csv</span></span><span class="Delimiter">:</span> <span class="Type">String</span><span class="-punctuation-bracket">)</span> <span class="Delimiter">-&gt;</span> <span class="-punctuation-bracket">(</span><span class="Type">Vec</span><span class="Operator"><span class="-punctuation-bracket">&lt;</span></span><span class="Type">Competitor</span><span class="Operator"><span class="-punctuation-bracket">&gt;</span></span><span class="Delimiter">,</span> <span class="-punctuation-bracket">[</span><span class="Type">Boulder</span><span class="Delimiter">;</span> <span class="-variable"><span class="Type"><span class="Constant">NUM_QUALIFIER_BOULDERS</span></span></span><span class="-punctuation-bracket">]</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span>
    <span class="Keyword">let</span> <span class="Keyword">mut</span> <span class="-variable">competitors</span> <span class="Operator">=</span> <span class="-variable"><span class="Type"><span class="-module"><span class="Type">Vec</span></span></span></span><span class="Delimiter">::</span><span class="-variable"><span class="Function">new</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Delimiter">;</span>
    <span class="Keyword">let</span> <span class="Keyword">mut</span> <span class="-variable">boulders</span> <span class="Operator">=</span> <span class="-punctuation-bracket">[</span><span class="Keyword">const</span> <span class="-punctuation-bracket">{</span> <span class="-variable"><span class="Type"><span class="-module"><span class="Type">Boulder</span></span></span></span><span class="Delimiter">::</span><span class="-variable"><span class="Function">new</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">}</span><span class="Delimiter">;</span> <span class="-variable"><span class="Type"><span class="Constant">NUM_QUALIFIER_BOULDERS</span></span></span><span class="-punctuation-bracket">]</span><span class="Delimiter">;</span>

    <span class="Keyword">let</span> <span class="-variable">trimfn</span> <span class="Operator">=</span> <span class="Operator"><span class="-punctuation-bracket">|</span></span><span class="-variable-parameter"><span class="-variable"><span class="-variable-parameter">c</span></span><span class="Delimiter">:</span> <span class="-type-builtin">char</span></span><span class="Operator"><span class="-punctuation-bracket">|</span></span> <span class="Delimiter">-&gt;</span> <span class="-type-builtin">bool</span> <span class="-punctuation-bracket">{</span> <span class="-variable">c</span> <span class="Operator">==</span> <span class="Character">'&quot;'</span> <span class="Operator">||</span> <span class="-variable">c</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">is_whitespace</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">}</span><span class="Delimiter">;</span>

    <span class="Keyword"><span class="Repeat">for</span></span> <span class="-variable">form_entry</span> <span class="Repeat">in</span> <span class="-variable">qualifier_csv</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">lines</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">skip</span></span><span class="-punctuation-bracket">(</span><span class="Number">1</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span>
        <span class="Keyword">let</span> <span class="-variable">columns</span> <span class="Operator">=</span> <span class="-variable">form_entry</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">split</span></span><span class="-punctuation-bracket">(</span><span class="Character">','</span><span class="-punctuation-bracket">)</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">collect</span></span><span class="Delimiter">::</span><span class="Operator"><span class="-punctuation-bracket">&lt;</span></span><span class="Type">Vec</span><span class="Operator"><span class="-punctuation-bracket">&lt;</span></span><span class="Type">_</span><span class="Operator"><span class="-punctuation-bracket">&gt;</span></span><span class="Operator"><span class="-punctuation-bracket">&gt;</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Delimiter">;</span>

        <span class="Keyword">let</span> <span class="-variable">first_name</span> <span class="Operator">=</span> <span class="-variable">columns</span><span class="-punctuation-bracket">[</span><span class="Number">0</span><span class="-punctuation-bracket">]</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">trim_matches</span></span><span class="-punctuation-bracket">(</span><span class="-variable">trimfn</span><span class="-punctuation-bracket">)</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">to_string</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Delimiter">;</span>
        <span class="Keyword">let</span> <span class="-variable">last_name</span> <span class="Operator">=</span> <span class="-variable">columns</span><span class="-punctuation-bracket">[</span><span class="Number">1</span><span class="-punctuation-bracket">]</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">trim_matches</span></span><span class="-punctuation-bracket">(</span><span class="-variable">trimfn</span><span class="-punctuation-bracket">)</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">to_string</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Delimiter">;</span>
        <span class="Keyword">let</span> <span class="-variable">category</span> <span class="Operator">=</span> <span class="Conditional">match</span> <span class="-variable">columns</span><span class="-punctuation-bracket">[</span><span class="Number">2</span><span class="-punctuation-bracket">]</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">trim_matches</span></span><span class="-punctuation-bracket">(</span><span class="-variable">trimfn</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span>
            <span class="String">&quot;womens&quot;</span> <span class="Delimiter">=&gt;</span> <span class="-variable"><span class="Type"><span class="-module"><span class="Type"><span class="Type">Category</span></span></span></span></span><span class="Delimiter">::</span><span class="-variable"><span class="Type"><span class="Type"><span class="Constant">Womens</span></span></span></span><span class="Delimiter">,</span>
            <span class="String">&quot;mens&quot;</span> <span class="Delimiter">=&gt;</span> <span class="-variable"><span class="Type"><span class="-module"><span class="Type"><span class="Type">Category</span></span></span></span></span><span class="Delimiter">::</span><span class="-variable"><span class="Type"><span class="Type"><span class="Constant">Mens</span></span></span></span><span class="Delimiter">,</span>
            <span class="-variable">category</span> <span class="Delimiter">=&gt;</span> <span class="-variable"><span class="-function-macro"><span class="-_identifier"><span class="Exception">panic</span></span></span></span><span class="Operator"><span class="-function-macro"><span class="Exception">!</span></span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">(</span></span><span class="String"><span class="String">&quot;Impossible category: {category}&quot;</span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">)</span></span><span class="Delimiter">,</span>
        <span class="-punctuation-bracket">}</span><span class="Delimiter">;</span>

        <span class="Keyword">let</span> <span class="Keyword">mut</span> <span class="-variable">outcomes</span> <span class="Operator">=</span> <span class="-punctuation-bracket">[</span><span class="Keyword">const</span> <span class="-punctuation-bracket">{</span> <span class="-variable"><span class="Type"><span class="-constant-builtin">None</span></span></span> <span class="-punctuation-bracket">}</span><span class="Delimiter">;</span> <span class="-variable"><span class="Type"><span class="Constant">NUM_QUALIFIER_BOULDERS</span></span></span><span class="-punctuation-bracket">]</span><span class="Delimiter">;</span>
        <span class="Keyword"><span class="Repeat">for</span></span> <span class="-punctuation-bracket">(</span><span class="-variable">i</span><span class="Delimiter">,</span> <span class="-variable">boulder</span><span class="-punctuation-bracket">)</span> <span class="Repeat">in</span> <span class="-variable">boulders</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">iter_mut</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">enumerate</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span>
            <span class="-variable">outcomes</span><span class="-punctuation-bracket">[</span><span class="-variable">i</span><span class="-punctuation-bracket">]</span> <span class="Operator">=</span> <span class="Conditional">match</span> <span class="-variable">columns</span><span class="-punctuation-bracket">[</span><span class="-variable">i</span> <span class="Operator">+</span> <span class="Number">3</span><span class="-punctuation-bracket">]</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">trim_matches</span></span><span class="-punctuation-bracket">(</span><span class="-variable">trimfn</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket">{</span>
                <span class="String">&quot;Flash&quot;</span> <span class="Delimiter">=&gt;</span> <span class="-punctuation-bracket">{</span>
                    <span class="-variable">boulder</span><span class="Delimiter">.</span><span class="-variable-member">flashes</span> <span class="Operator">+=</span> <span class="Number">1</span><span class="Delimiter">;</span>
                    <span class="-variable"><span class="Type"><span class="Function"><span class="-constant-builtin">Some</span></span></span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type"><span class="-module"><span class="Type"><span class="Type">Outcome</span></span></span></span></span><span class="Delimiter">::</span><span class="-variable"><span class="Type"><span class="Type"><span class="Constant">Flash</span></span></span></span><span class="-punctuation-bracket">)</span>
                <span class="-punctuation-bracket">}</span>
                <span class="String">&quot;Top&quot;</span> <span class="Delimiter">=&gt;</span> <span class="-punctuation-bracket">{</span>
                    <span class="-variable">boulder</span><span class="Delimiter">.</span><span class="-variable-member">tops</span> <span class="Operator">+=</span> <span class="Number">1</span><span class="Delimiter">;</span>
                    <span class="-variable"><span class="Type"><span class="Function"><span class="-constant-builtin">Some</span></span></span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type"><span class="-module"><span class="Type"><span class="Type">Outcome</span></span></span></span></span><span class="Delimiter">::</span><span class="-variable"><span class="Type"><span class="Type"><span class="Constant">Top</span></span></span></span><span class="-punctuation-bracket">)</span>
                <span class="-punctuation-bracket">}</span>
                <span class="String">&quot;Zone&quot;</span> <span class="Delimiter">=&gt;</span> <span class="-punctuation-bracket">{</span>
                    <span class="-variable">boulder</span><span class="Delimiter">.</span><span class="-variable-member">zones</span> <span class="Operator">+=</span> <span class="Number">1</span><span class="Delimiter">;</span>
                    <span class="-variable"><span class="Type"><span class="Function"><span class="-constant-builtin">Some</span></span></span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type"><span class="-module"><span class="Type"><span class="Type">Outcome</span></span></span></span></span><span class="Delimiter">::</span><span class="-variable"><span class="Type"><span class="Type"><span class="Constant">Zone</span></span></span></span><span class="-punctuation-bracket">)</span>
                <span class="-punctuation-bracket">}</span>
                <span class="String">&quot;&quot;</span> <span class="Delimiter">=&gt;</span> <span class="-variable"><span class="Type"><span class="-constant-builtin">None</span></span></span><span class="Delimiter">,</span>
                <span class="-variable">o</span> <span class="Delimiter">=&gt;</span> <span class="-variable"><span class="-function-macro"><span class="-_identifier"><span class="Exception">panic</span></span></span></span><span class="Operator"><span class="-function-macro"><span class="Exception">!</span></span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">(</span></span><span class="String"><span class="String">&quot;Impossible outcome found: {o}&quot;</span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">)</span></span><span class="Delimiter">,</span>
            <span class="-punctuation-bracket">}</span>
        <span class="-punctuation-bracket">}</span>

        <span class="-variable">competitors</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">push</span></span><span class="-punctuation-bracket">(</span><span class="Type">Competitor</span> <span class="-punctuation-bracket">{</span>
            <span class="-variable"><span class="-variable-member">first_name</span></span><span class="Delimiter">,</span>
            <span class="-variable"><span class="-variable-member">last_name</span></span><span class="Delimiter">,</span>
            <span class="-variable"><span class="-variable-member">category</span></span><span class="Delimiter">,</span>
            <span class="-variable-member">score</span><span class="Delimiter">:</span> <span class="Number">0</span><span class="Delimiter">,</span> <span class="Comment"><span class="-spell">// Calculate this below</span></span>
            <span class="-variable"><span class="-variable-member">outcomes</span></span><span class="Delimiter">,</span>
        <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span><span class="Delimiter">;</span>
    <span class="-punctuation-bracket">}</span>

    <span class="-punctuation-bracket">(</span><span class="-variable">competitors</span><span class="Delimiter">,</span> <span class="-variable">boulders</span><span class="-punctuation-bracket">)</span>
<span class="-punctuation-bracket">}</span>

<span class="Special">#</span><span class="-punctuation-bracket">[</span><span class="-variable"><span class="-function-macro">derive</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">Clone</span></span><span class="Delimiter">,</span> <span class="-variable"><span class="Type">Copy</span></span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">]</span>
<span class="Keyword">struct</span> <span class="Type">Boulder</span> <span class="-punctuation-bracket">{</span>
    <span class="-variable-member">zones</span><span class="Delimiter">:</span> <span class="-type-builtin">u32</span><span class="Delimiter">,</span>
    <span class="-variable-member">tops</span><span class="Delimiter">:</span> <span class="-type-builtin">u32</span><span class="Delimiter">,</span>
    <span class="-variable-member">flashes</span><span class="Delimiter">:</span> <span class="-type-builtin">u32</span><span class="Delimiter">,</span>
<span class="-punctuation-bracket">}</span>

<span class="Keyword">impl</span> <span class="Type">Boulder</span> <span class="-punctuation-bracket">{</span>
    <span class="Keyword">const</span> <span class="-keyword-function">fn</span> <span class="-variable"><span class="Function">new</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span> <span class="Delimiter">-&gt;</span> <span class="Type">Self</span> <span class="-punctuation-bracket">{</span>
        <span class="Type">Self</span> <span class="-punctuation-bracket">{</span>
            <span class="-variable-member">zones</span><span class="Delimiter">:</span> <span class="Number">0</span><span class="Delimiter">,</span>
            <span class="-variable-member">tops</span><span class="Delimiter">:</span> <span class="Number">0</span><span class="Delimiter">,</span>
            <span class="-variable-member">flashes</span><span class="Delimiter">:</span> <span class="Number">0</span><span class="Delimiter">,</span>
        <span class="-punctuation-bracket">}</span>
    <span class="-punctuation-bracket">}</span>
    <span class="-keyword-function">fn</span> <span class="-variable"><span class="Function">zone_score</span></span><span class="-punctuation-bracket">(</span><span class="Operator">&amp;</span><span class="-variable-builtin">self</span><span class="-punctuation-bracket">)</span> <span class="Delimiter">-&gt;</span> <span class="-type-builtin">u32</span> <span class="-punctuation-bracket">{</span>
        <span class="-variable"><span class="Type"><span class="Constant">ZONE_SCORE</span></span></span> <span class="Operator">/</span> <span class="-punctuation-bracket">(</span><span class="-variable-builtin">self</span><span class="Delimiter">.</span><span class="-variable-member">zones</span> <span class="Operator">+</span> <span class="-variable-builtin">self</span><span class="Delimiter">.</span><span class="-variable-member">tops</span> <span class="Operator">+</span> <span class="-variable-builtin">self</span><span class="Delimiter">.</span><span class="-variable-member">flashes</span><span class="-punctuation-bracket">)</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">max</span></span><span class="-punctuation-bracket">(</span><span class="Number">1</span><span class="-punctuation-bracket">)</span>
    <span class="-punctuation-bracket">}</span>

    <span class="-keyword-function">fn</span> <span class="-variable"><span class="Function">top_score</span></span><span class="-punctuation-bracket">(</span><span class="Operator">&amp;</span><span class="-variable-builtin">self</span><span class="-punctuation-bracket">)</span> <span class="Delimiter">-&gt;</span> <span class="-type-builtin">u32</span> <span class="-punctuation-bracket">{</span>
        <span class="-variable"><span class="Type"><span class="Constant">TOP_SCORE</span></span></span> <span class="Operator">/</span> <span class="-punctuation-bracket">(</span><span class="-variable-builtin">self</span><span class="Delimiter">.</span><span class="-variable-member">tops</span> <span class="Operator">+</span> <span class="-variable-builtin">self</span><span class="Delimiter">.</span><span class="-variable-member">flashes</span><span class="-punctuation-bracket">)</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">max</span></span><span class="-punctuation-bracket">(</span><span class="Number">1</span><span class="-punctuation-bracket">)</span>
    <span class="-punctuation-bracket">}</span>

    <span class="-keyword-function">fn</span> <span class="-variable"><span class="Function">flash_score</span></span><span class="-punctuation-bracket">(</span><span class="Operator">&amp;</span><span class="-variable-builtin">self</span><span class="-punctuation-bracket">)</span> <span class="Delimiter">-&gt;</span> <span class="-type-builtin">u32</span> <span class="-punctuation-bracket">{</span>
        <span class="-variable"><span class="Type"><span class="Constant">FLASH_SCORE</span></span></span> <span class="Operator">/</span> <span class="-punctuation-bracket">(</span><span class="-variable-builtin">self</span><span class="Delimiter">.</span><span class="-variable-member">tops</span> <span class="Operator">+</span> <span class="-variable-builtin">self</span><span class="Delimiter">.</span><span class="-variable-member">flashes</span><span class="-punctuation-bracket">)</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">max</span></span><span class="-punctuation-bracket">(</span><span class="Number">1</span><span class="-punctuation-bracket">)</span>
    <span class="-punctuation-bracket">}</span>
<span class="-punctuation-bracket">}</span>

<span class="Special">#</span><span class="-punctuation-bracket">[</span><span class="-variable"><span class="-function-macro">derive</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">Debug</span></span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">]</span>
<span class="Keyword">struct</span> <span class="Type">Competitor</span> <span class="-punctuation-bracket">{</span>
    <span class="-variable-member">first_name</span><span class="Delimiter">:</span> <span class="Type">String</span><span class="Delimiter">,</span>
    <span class="-variable-member">last_name</span><span class="Delimiter">:</span> <span class="Type">String</span><span class="Delimiter">,</span>
    <span class="-variable-member">category</span><span class="Delimiter">:</span> <span class="Type">Category</span><span class="Delimiter">,</span>
    <span class="-variable-member">score</span><span class="Delimiter">:</span> <span class="-type-builtin">u32</span><span class="Delimiter">,</span>
    <span class="-variable-member">outcomes</span><span class="Delimiter">:</span> <span class="-punctuation-bracket">[</span><span class="Type">Option</span><span class="Operator"><span class="-punctuation-bracket">&lt;</span></span><span class="Type">Outcome</span><span class="Operator"><span class="-punctuation-bracket">&gt;</span></span><span class="Delimiter">;</span> <span class="-variable"><span class="Type"><span class="Constant">NUM_QUALIFIER_BOULDERS</span></span></span><span class="-punctuation-bracket">]</span><span class="Delimiter">,</span>
<span class="-punctuation-bracket">}</span>

<span class="Special">#</span><span class="-punctuation-bracket">[</span><span class="-variable"><span class="-function-macro">derive</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">Debug</span></span><span class="Delimiter">,</span> <span class="-variable"><span class="Type">Clone</span></span><span class="Delimiter">,</span> <span class="-variable"><span class="Type">Copy</span></span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">]</span>
<span class="Keyword">enum</span> <span class="Type">Outcome</span> <span class="-punctuation-bracket">{</span>
    <span class="-variable"><span class="Type"><span class="Constant">Zone</span></span></span><span class="Delimiter">,</span>
    <span class="-variable"><span class="Type"><span class="Constant">Top</span></span></span><span class="Delimiter">,</span>
    <span class="-variable"><span class="Type"><span class="Constant">Flash</span></span></span><span class="Delimiter">,</span>
<span class="-punctuation-bracket">}</span>

<span class="Special">#</span><span class="-punctuation-bracket">[</span><span class="-variable"><span class="-function-macro">derive</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type">Debug</span></span><span class="Delimiter">,</span> <span class="-variable"><span class="Type">Clone</span></span><span class="Delimiter">,</span> <span class="-variable"><span class="Type">Copy</span></span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">]</span>
<span class="Keyword">enum</span> <span class="Type">Category</span> <span class="-punctuation-bracket">{</span>
    <span class="-variable"><span class="Type"><span class="Constant">Mens</span></span></span><span class="Delimiter">,</span>
    <span class="-variable"><span class="Type"><span class="Constant">Womens</span></span></span><span class="Delimiter">,</span>
<span class="-punctuation-bracket">}</span>

</pre>
</body>
</html>
